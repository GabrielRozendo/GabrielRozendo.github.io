{{ $allProjects := where .Site.Data.cv.projects.projects "show" true | default .Site.Data.cv.projects.projects }}
{{ $recentProjects := first 2 $allProjects }}
{{ if $recentProjects }}
<section class="cv-projects">
    <div class="cv-section-header">
        <h2 class="cv-section-title"><i class="fa-solid fa-folder-open"></i> Projects</h2>
        {{ if gt (len $allProjects) 2 }}
        <a href="/cv/projects/" class="cv-section-view-all">View all {{ len $allProjects }} projects â†’</a>
        {{ end }}
    </div>
    {{ range $recentProjects }}
    <div class="cv-project-item">
        <div class="cv-project-header">
            <h3 class="cv-project-name">
                {{ if .link }}
                <a href="{{ .link }}" target="_blank" rel="noopener noreferrer">{{ .name }}</a>
                {{ else }}
                {{ .name }}
                {{ end }}
            </h3>
            <div class="cv-project-meta">
                {{ if .tags }}<span class="cv-project-tags">{{ .tags }}</span>{{ end }}
                {{ if .date }}<span class="cv-project-date">{{ .date }}</span>{{ end }}
            </div>
        </div>
        <div class="cv-project-description">{{ .description | markdownify }}</div>
    </div>
    {{ end }}
</section>
{{ end }}
